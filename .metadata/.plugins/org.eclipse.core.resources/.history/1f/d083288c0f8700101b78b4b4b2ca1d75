<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.demo.board.mapper.BoardMapper">

<sql id="criteria">
	<where>
		<if test="firstName != null">
	    	UPPER(first_name) LIKE '%' || UPPER(#{firstName}) || '%'
	    </if>
	    <if test="departmentId != null">
	    	 AND DEPARTMENT_ID = #{departmentId}
	    </if>
	</where>
</sql>

<resultMap type="boardVO" id="BoardMap">
	<association property="deptVO" column="DEPARTMENT_ID" javaType="DeptVO" select="selectDeptById"/>
</resultMap>

<!-- 전체조회 -->
<select id="" resultType="">
	SELECT bno,
		   title,
		   content,
		   writer,
	       regdate,
		   updatedate
	FROM   (
	    SELECT /*+INDEX_DESC (TBL_BOARD PK_BOARD)*/
	    	   ROWNUM RN, T.* 
	    FROM   TBL_BOARD T
	) B
	WHERE RN BETWEEN #{first} AND #{last}
</select>

<!-- 단건조회 -->
<select id="" resultType="">>
	SELECT rno,
		   bno,
		   reply,
		   replyer,
		   replydate,
		   updatedate
	FROM   TBL_REPLY
	WHERE  bno = #{bno}
</select>
